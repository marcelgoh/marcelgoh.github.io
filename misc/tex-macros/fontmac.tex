% Macros for creating documents
% Written by Marcel Goh, unless otherwise specified.

% FONTS
\font\bigbold=cmbx12
\font\bigsans=cmss12
\font\smallheader=cmssbx10 % for section headers

% Small caps
\font\ninesc=cmcsc9
\font\tensc=cmcsc10

% Roman fonts
\font\eightpt=cmr8
\font\ninept=cmr9
\font\twelvept=cmr12

% Bold fonts
\font\eightbold=cmbx8
\font\ninebold=cmbx9

% Create header on non-first pages
\def\leftrighttop#1#2{
  \headline{\ifnum\pageno=1\hfil\else{\ninept #1 \hfil #2}\fi}
}

% No page numbers on first page
\def\firstnopagenum{
  \footline{\ifnum\pageno=1 \hfil \else \hfil{\rm \number\pageno}\hfil\fi}
}

% Create title, subtitle, name, and date
\def\maketitle#1#2#3#4{
  \centerline {\bigbold #1}
  \medskip
  \centerline {\eightpt #2}
  \medskip
  \centerline {\tensc #3}
  \medskip
  \centerline {\tensc #4}
  \bigskip
}
% Two-author version
\def\maketitletwoauthor#1#2#3#4#5{
  \centerline {\bigbold #1}
  \medskip
  \centerline {\eightpt #2}
  \medskip
  \centerline{\tensc #3\enspace \eightpt and\enspace \tensc #4}
  \medskip
  \centerline {\tensc #5}
  \bigskip
}

% Create title, subtitle, and name
\def\maketitlenodate#1#2#3{
  \centerline {\bigbold #1}
  \medskip
  \centerline {\eightpt #2}
  \medskip
  \centerline {\tensc #3}
  \bigskip
}

% Create floating text box with specified width in inches.
% Useful for abstracts (6 true inches is good):
% \floattext 6 Abstract. text...
\outer\def\floattext#1 #2. #3\par{
  $$
  \vbox{
    \hsize #1 true in
    \noindent{\bf #2.}\enskip #3
  }
  $$
}

% Math version of floattext, no bold label
\def\mathfloattext#1#2{
  \vbox{
    \hsize #1 true in
    \noindent #2
  }
}

% Section header in heavy sans-serif font
% Separate two of these in a row with \vskip -\medskipamount
\def\section#1\par{
  \bigskip\vskip\parskip
  \leftline{\smallheader#1}\nobreak\medskip\noindent
}

% Centred version
\def\csection#1\par{
  \bigskip\vskip\parskip
  \centerline{\smallheader#1}\nobreak\medskip\noindent
}

% Right-justified version
\def\rsection#1\par{
  \bigskip\vskip\parskip
  \rightline{\smallheader#1}\nobreak\medskip\noindent
}

% Figure caption
\def\caption Fig. #1. #2.{{\ninebold Fig.\ #1.}\enspace{\ninept #2.}}

% From the TeXbook: Verbatim typewriter text
% Modified to have ~ be escape character instead of ~
\newskip\ttglue
\ttglue=.5em plus.25em minus.15em

\outer\def\begindisplay{\obeylines\startdisplay}
{\obeylines\gdef\startdisplay#1
  {\catcode`\^^M=5$$#1\halign\bgroup\indent##\hfil&&\qquad##\hfil\cr}}
\outer\def\enddisplay{\crcr\egroup$$}

\chardef\other=12
\def\ttverbatim{\begingroup \catcode`\\=\other \catcode`\{=\other
  \catcode`\}=\other \catcode`\$=\other \catcode`\&=\other
  \catcode`\#=\other \catcode`\%=\other \catcode`\|=\other
  \catcode`\_=\other \catcode`\^=\other
  \obeyspaces \obeylines \tt}

{\obeyspaces\gdef {\ }} % \obeyspaces now gives \ , not \space

\outer\def\begintt{$$\let\par=\endgraf \ttverbatim \parskip=0pt
  \catcode`\~=0 \rightskip=-5pc \ttfinish}
{\catcode`\~=0 ~catcode`~\=\other % ~ is temporary escape character
  ~obeylines % end of line is active
  ~gdef~ttfinish#1^^M#2\endtt{#1~vbox{#2}~endgroup$$}}

\catcode`\~=\active {\obeylines\gdef~{\ttverbatim\spaceskip=\ttglue\let^^M=\ \let~=\endgroup}}

% Block of left-justified text, in "poetry-mode"
\def\begintext{\par\begingroup\nobreak\medskip \obeylines}
\def\endtext{\endgroup\medbreak\noindent}

% Fraktur font
\font\tenfrak=eufm10
\font\sevenfrak=eufm7
\font\fivefrak=eufm5
\newfam\frakfam
\textfont\frakfam=\tenfrak
\scriptfont\frakfam=\sevenfrak
\scriptscriptfont\frakfam=\fivefrak
\def\frak#1{{\fam\frakfam #1}}

% Old Standard text with Latin Modern extra math symbols
\def\oldstandard{
  \font\tenrm=OldStandard-Regular-tlf-t1 at 10pt % roman text
  \font\sevenrm=OldStandard-Regular-tlf-t1 at 7pt
  \font\fiverm=OldStandard-Regular-tlf-t1 at 5pt
  \font\tensc=OldStandard-Regular-tlf-t1 at 10pt
  \font\eightpt=OldStandard-Regular-tlf-t1 at 8pt % eight point
  \font\ninept=OldStandard-Regular-tlf-t1 at 9pt

  \font\tenbf=OldStandard-Bold-tlf-t1 at 10pt % boldface extended
  \font\smallheader=OldStandard-Bold-tlf-t1 at 11pt
  \font\sevenbf=OldStandard-Bold-tlf-t1 at 7pt
  \font\fivebf=OldStandard-Bold-tlf-t1 at 5pt
  \font\bigbold=OldStandard-Bold-tlf-t1 at 12pt

  \font\tensl=OldStandard-Italic-tlf-t1 at 10pt % slanted roman

  \font\tenit=OldStandard-Italic-tlf-t1 at 10pt % text italic

  % Math family
  \font\tenrmop=OldStandard-Regular-tlf-t1 at 10pt % roman text
  \font\sevenrmop=OldStandard-Regular-tlf-t1 at 7pt
  \font\fivermop=OldStandard-Regular-tlf-t1 at 5pt

  \textfont0=\tenrmop
  \scriptfont0=\sevenrmop
  \scriptscriptfont0=\fivermop

  \font\teni=OldStandard-Italic-tlf-t1 at 10pt
  \font\seveni=OldStandard-Italic-tlf-t1 at 7pt
  \font\fivei=OldStandard-Italic-tlf-t1 at 5pt

  \font\tenlmmi=lmmi10 at 10pt % math symbols
  \font\sevenlmmi=lmmi10 at 7pt
  \font\fivelmmi=lmmi10 at 5pt

  \font\tensy=lmsy10 at 10pt % math symbols
  \font\sevensy=lmsy10 at 7pt
  \font\fivesy=lmsy10 at 5pt

  \font\tenex=lmex10 at 10pt % math extension

  % Redefine all these boys
  \textfont0=\tenrm \scriptfont0=\sevenrm \scriptscriptfont0=\fiverm
  \textfont1=\tenlmmi \scriptfont1=\sevenlmmi \scriptscriptfont1=\fivelmmi
  \textfont2=\tensy \scriptfont2=\sevensy \scriptscriptfont2=\fivesy
  \textfont3=\tenex \scriptfont3=\tenex \scriptscriptfont3=\tenex
  \textfont\itfam=\tenit
  \textfont\slfam=\tensl
  \textfont\bffam=\tenbf \scriptfont\bffam=\sevenbf
  \scriptscriptfont\bffam=\fivebf
  \textfont\ttfam=\tentt

  \tenrm
}

% A janky small-caps
\def\janksc#1#2 {#1{\eightpt#2}}
\def\jankscsp#1#2 {#1{\eightpt#2}\ }
\def\scproclaim#1.#2\par{\noindent\jankscsp #1.\enspace{\it#2\par}}
