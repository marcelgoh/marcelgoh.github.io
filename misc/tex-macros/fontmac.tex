% Macros for creating documents
% Written by Marcel Goh, unless otherwise specified.

% FONTS
\font\bigbold=cmbx12
\font\bigsans=cmss12
\font\smallheader=cmssbx10 % for section headers

% Small caps
\font\ninesc=cmcsc9
\font\tensc=cmcsc10

% Roman fonts
\font\eightpt=cmr8
\font\ninept=cmr9
\font\twelvept=cmr12

% Create header on non-first pages
\def\leftrighttop#1#2{
  \headline{\ifnum\pageno=1\hfil\else{\ninept #1 \hfil #2}\fi}
}

% No page numbers on first page
\def\firstnopagenum{
  \footline{\ifnum\pageno=1 \hfil \else \hfil\number\pageno\hfil\fi}
}

% Create title, subtitle, name, and date
\def\maketitle#1#2#3#4{
  \centerline {\bigbold #1}
  \medskip
  \centerline {\eightpt #2}
  \medskip
  \centerline {\tensc #3}
  \medskip
  \centerline {\tensc #4}
  \bigskip
}

% Create title, subtitle, and name
\def\maketitlenodate#1#2#3{
  \centerline {\bigbold #1}
  \medskip
  \centerline {\eightpt #2}
  \medskip
  \centerline {\tensc #3}
  \bigskip
}

% Create floating text box with specified width in inches.
% Useful for abstracts (6 true inches is good):
% \floattext 6 Abstract. text...
\outer\def\floattext#1 #2. #3\par{
  $$
  \vbox{
    \hsize #1 true in
    \noindent{\bf #2.}\enskip #3
  }
  $$
}

% Section header in heavy sans-serif font
% Separate two of these in a row with \vskip -\medskipamount
\def\section#1\par{
  \bigskip\vskip\parskip
  \leftline{\smallheader#1}\nobreak\medskip\noindent
}

% From the TeXbook: Verbatim typewriter text
% Modified to have ~ be escape character instead of ~
\newskip\ttglue
\ttglue=.5em plus.25em minus.15em

\outer\def\begindisplay{\obeylines\startdisplay}
{\obeylines\gdef\startdisplay#1
  {\catcode`\^^M=5$$#1\halign\bgroup\indent##\hfil&&\qquad##\hfil\cr}}
\outer\def\enddisplay{\crcr\egroup$$}

\chardef\other=12
\def\ttverbatim{\begingroup \catcode`\\=\other \catcode`\{=\other
  \catcode`\}=\other \catcode`\$=\other \catcode`\&=\other
  \catcode`\#=\other \catcode`\%=\other \catcode`\|=\other
  \catcode`\_=\other \catcode`\^=\other
  \obeyspaces \obeylines \tt}

{\obeyspaces\gdef {\ }} % \obeyspaces now gives \ , not \space

\outer\def\begintt{$$\let\par=\endgraf \ttverbatim \parskip=0pt
  \catcode`\~=0 \rightskip=-5pc \ttfinish}
{\catcode`\~=0 ~catcode`~\=\other % ~ is temporary escape character
  ~obeylines % end of line is active
  ~gdef~ttfinish#1^^M#2\endtt{#1~vbox{#2}~endgroup$$}}

\catcode`\~=\active {\obeylines\gdef~{\ttverbatim\spaceskip=\ttglue\let^^M=\ \let~=\endgroup}}

% Block of left-justified text, in "poetry-mode"
\def\begintext{\par\begingroup\nobreak\medskip \obeylines}
\def\endtext{\endgroup\medbreak\noindent}
